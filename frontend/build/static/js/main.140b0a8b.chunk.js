(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{117:function(e,t,a){},176:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a(0),n=a.n(r),s=a(54),o=a.n(s),i=a(18),l=(a(117),a(3)),j=a(2),d=a(8),u=a(182),b=a(183),p=a(184),O=a(185),h=a(207),x=function(){return Object(c.jsxs)("svg",{fill:"white",width:"12px",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[Object(c.jsx)("title",{children:"Menu"}),Object(c.jsx)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})},m=a(186),f=function(e){var t=e.children;return Object(c.jsx)(u.a,{mt:{base:4,md:0},mr:6,display:"block",children:t})},y=function(e){var t=n.a.useState(!1),a=Object(j.a)(t,2),r=a[0],s=a[1],o=Object(d.d)((function(e){return e.auth}));return Object(c.jsxs)(b.a,Object(l.a)(Object(l.a)({as:"nav",align:"center",justify:"space-between",wrap:"wrap",padding:"1.5rem",bg:"teal.500",color:"white"},e),{},{mb:4,children:[Object(c.jsx)(b.a,{align:"center",mr:5,children:Object(c.jsx)(p.a,{as:"h1",size:"lg",letterSpacing:"0.2rem",children:Object(c.jsx)(i.b,{to:"/",children:"Study Management"})})}),Object(c.jsx)(O.a,{cursor:"pointer",display:{base:"block",md:"none"},onClick:function(){return s(!r)},children:Object(c.jsx)(x,{})}),Object(c.jsxs)(O.a,{display:{sm:r?"block":"none",md:"flex"},width:{sm:"full",md:"auto"},alignItems:"center",flexGrow:1,children:[Object(c.jsx)(f,{children:Object(c.jsx)(i.c,{to:"/courses",exact:!0,children:"Courses"})}),Object(c.jsx)(f,{children:Object(c.jsx)(i.c,{to:"/semesters",exact:!0,children:"Semesters"})})]}),Object(c.jsx)(O.a,{display:{sm:r?"block":"none",md:"block"},mt:{base:4,md:0},children:o.isAuthenticated?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(h.a,{as:i.c,to:"/course/new",leftIcon:Object(c.jsx)(m.a,{}),mr:{base:2},bg:"transparent",border:"1px",children:"Create Course"}),Object(c.jsx)(h.a,{as:i.c,to:"/post/new",leftIcon:Object(c.jsx)(m.a,{}),mr:{base:2},bg:"transparent",border:"1px",children:"Upload"}),Object(c.jsx)(h.a,{isLoading:o.loading,as:i.c,to:"/logout",mr:{base:2},bg:"transparent",border:"1px",children:"Logout"})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(h.a,{as:i.c,to:"/login",mr:{base:2},bg:"transparent",border:"1px",children:"Login"}),Object(c.jsx)(h.a,{as:i.c,to:"/register",bg:"transparent",border:"1px",children:"Create account"})]})})]}))},g=a(36),v=a(20),w=a(102),E=a.n(w).a.create({baseURL:"http://localhost:8000/api"}),S="SEMESTER_DATA_LOADED",_="SEMESTER_DATA_LOADING",C="USER_LOGGED_IN",R="USER_LOGIN_ERROR",T="USER_LOGGED_OUT",A="AUTH_LOADING",k="FORGET_PASSWORD_RESET_EMAIL_SENT",D="RESET_PASSWORD_ERROR",P="RESET_PASSWORD_STATUS",I="COURSE_DATA_LOADED",L="COURSE_DATA_LOAD_ERROR",F="COURSE_CREATED",M="COURSE_CREATE_ERROR",N="POST_DATA_LOADING",U="POST_DATA_LOADED",G="POST_DATA_LOAD_ERROR",z="POST_CREATED",q="POST_CREATE_ERROR",B="POST_CREATE_LOADING";function W(e){return Object(l.a)({Authorization:"Token ".concat(localStorage.getItem("userToken"))},e)}var H=function(e){var t="".concat(e);return e<1024?t="".concat(e," bytes"):e/1024<1024?t="".concat((e/1024).toFixed(2)," KB"):e/1048576<1024?t="".concat((e/1048576).toFixed(2)," MB"):e/1073741824<1024&&(t="".concat((e/1073741824).toFixed(2)," GB")),t};function V(e){var t="?";return e&&(e.course&&(t+="course=".concat(e.course,"&")),e.semester&&(t+="semester=".concat(e.semester,"&"))),t}function X(e){var t=e.charAt(e.length-1);return"?"!==t&&"&"!==t||(e=e.slice(0,e.length-1)),e}var J=function(e){return function(t){t({type:N,payload:!0}),t({type:z,payload:!1});var a=X(V(e));E.get("/posts/".concat(a)).then((function(e){t({type:U,payload:e.data}),t({type:N,payload:!1})})).catch((function(e){t({type:G,payload:e.response.data}),t({type:N,payload:!1})}))}},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"next";return function(a,c){a({type:N,payload:!0}),a({type:z,payload:!1});var r=c().post,n=X(V(e));E.get("".concat(r[t]).concat(n)).then((function(e){a({type:U,payload:e.data}),a({type:N,payload:!1})})).catch((function(e){a({type:G,payload:e.response.data}),a({type:N,payload:!1})}))}},K=a(195),Q=a(187),Z=a(208),$=a(189),ee=a(190),te=a(206),ae=a(103),ce=function(e){var t=e.skeleton,a=Object(g.a)(e,["skeleton"]);return t?Object(c.jsx)(te.a,Object(l.a)({},a)):Object(c.jsx)(ae.BeatLoader,Object(l.a)({},a))},re=a(104),ne=(a(175),a(191)),se=function(e){var t=e.title,a=e.children,r=Object(g.a)(e,["title","children"]);return a?Object(c.jsx)(p.a,Object(l.a)(Object(l.a)({opacity:"0.7",size:"md",mb:2},r),{},{children:a})):Object(c.jsx)(p.a,Object(l.a)(Object(l.a)({opacity:"0.7",size:"md",mb:2},r),{},{children:t}))},oe=function(e){var t=e.post,a=[];t.questions.map((function(e){return e.pictures.map((function(e){return a.push(e)}))}));var n=Object(r.useState)(!1),s=Object(j.a)(n,2),o=s[0],i=s[1],l=Object(r.useState)(0),d=Object(j.a)(l,2),b=d[0],p=d[1];return Object(c.jsxs)(O.a,{boxShadow:"md",my:6,p:"6",rounded:"md",bg:"white",children:[Object(c.jsx)(se,{size:"sm",title:t.title}),Object(c.jsx)("hr",{}),Object(c.jsx)(u.a,{mt:2,children:t.body}),Object(c.jsx)(se,{size:"sm",my:2,title:"Attachments"}),Object(c.jsx)(Q.a,{children:t.questions.map((function(e){return e.pictures.map((function(e,t){return Object(c.jsx)(Q.b,{children:Object(c.jsx)(O.a,{rounded:"md",boxShadow:"md",children:Object(c.jsx)(Z.a,{onClick:function(){return function(e){p(e),i(!0)}(t)},boxSize:"100px",objectFit:"cover",cursor:"pointer",src:e.picture,alt:e.picture,_hover:{opacity:.5},fallback:Object(c.jsx)(ce,{})})})},e.id)}))}))}),o&&Object(c.jsx)(re.a,{mainSrc:a[b].picture,nextSrc:a[(b+1)%a.length].picture,prevSrc:a[(b+a.length-1)%a.length].picture,onCloseRequest:function(){return i(!1)},onMovePrevRequest:function(){return p((b+a.length-1)%a.length)},onMoveNextRequest:function(){return p((b+1)%a.length)}}),Object(c.jsxs)($.a,{mt:2,spacing:3,children:[t.books.map((function(e){return Object(c.jsxs)($.c,{children:[Object(c.jsx)($.b,{as:ee.a,color:"green.500"}),Object(c.jsx)(ne.a,{target:"_blank",href:e.file,_hover:{opacity:.5},children:e.title})]},e.id)})),t.classnotes.map((function(e){return Object(c.jsxs)($.c,{children:[Object(c.jsx)($.b,{as:ee.a,color:"green.500"}),Object(c.jsx)(ne.a,{target:"_blank",href:e.file,_hover:{opacity:.5},children:e.title})]},e.id)}))]})]},t.id)},ie=function(e){var t=e.posts;return Object(c.jsx)(c.Fragment,{children:t.map((function(e){return Object(c.jsx)(oe,{post:e},e.id)}))})},le=a(192),je=function(e){var t=e.postData,a=t.next,r=t.previous,n=Object(d.c)();return Object(c.jsx)(O.a,{mt:2,children:Object(c.jsxs)(b.a,{children:[Object(c.jsx)(h.a,{onClick:function(){return n(Y({},"previous"))},disabled:!r,mr:{base:2},bg:"transparent",border:"1px",children:"Previous"}),Object(c.jsx)(le.a,{}),Object(c.jsx)(h.a,{onClick:function(){return n(Y({},"next"))},disabled:!a,bg:"transparent",border:"1px",children:"Next"})]})})},de=function(){return function(e){e({type:_,payload:!0}),E.get("/semesters/").then((function(t){e({type:S,payload:t.data}),e({type:_,payload:!1})})).catch((function(t){e({type:"SEMESTER_DATA_ERROR",payload:t.response.data}),e({type:_,payload:!1})}))}},ue=function(){var e=Object(d.c)(),t=Object(d.d)((function(e){return e.semester}));return Object(r.useEffect)((function(){e(de())}),[e]),Object(c.jsx)(c.Fragment,{children:t.data.length>0&&Object(c.jsx)(c.Fragment,{children:t.data.map((function(e){return Object(c.jsxs)(O.a,{boxShadow:"2xl",m:6,p:"6",rounded:"md",bg:"white",children:[Object(c.jsx)(se,{title:"Courses of ".concat(e.full_name," (").concat(e.display_name,")"),as:"h2"}),Object(c.jsx)("hr",{}),Object(c.jsx)($.a,{mt:2,spacing:3,children:e.courses.map((function(e){return Object(c.jsxs)($.c,{children:[Object(c.jsx)($.b,{as:ee.a,color:"green.500"}),Object(c.jsxs)(i.c,{to:"/courses/".concat(e.id,"/").concat(e.course_code,"/").concat(e.title),children:[e.course_code," - ",e.title]})]},e.course_code)}))})]},e.id)}))})})},be=function(){var e=Object(d.c)(),t=Object(d.d)((function(e){return e.semester}));return Object(r.useEffect)((function(){e(de())}),[e]),Object(c.jsx)(c.Fragment,{children:t.data.length>0&&Object(c.jsxs)(O.a,{boxShadow:"2xl",m:6,p:"6",rounded:"md",bg:"white",children:[Object(c.jsx)(se,{title:"Semesters",as:"h2"}),Object(c.jsx)("hr",{}),Object(c.jsx)($.a,{mt:2,spacing:3,children:t.data.map((function(e){return Object(c.jsxs)($.c,{children:[Object(c.jsx)($.b,{as:ee.a,color:"green.500"}),Object(c.jsxs)(i.c,{to:"/semesters/".concat(e.id,"/").concat(e.full_name,"/").concat(e.display_name),children:[e.full_name," - ",e.display_name]})]},e.full_name)}))})]})})},pe=function(){return Object(c.jsx)(u.a,{children:"Nothing found here"})},Oe=a(193),he=a(194),xe=function(e){var t=e.title;return Object(c.jsx)(se,{children:Object(c.jsxs)(Oe.a,{spacing:"4px",separator:Object(c.jsx)(he.a,{color:"gray.500"}),children:[Object(c.jsx)(Oe.b,{children:Object(c.jsx)(Oe.c,{as:i.b,to:"/",children:"Home"})}),Object(c.jsx)(Oe.b,{isCurrentPage:!0,children:Object(c.jsx)(Oe.c,{children:t})})]})})},me=function(e){var t=e.title,a=e.postData,r=a.data,n=Object(K.a)("(min-width: 1280px)"),s=Object(j.a)(n,1)[0];return Object(c.jsxs)(b.a,{children:[s&&Object(c.jsx)(O.a,{w:"25%",children:Object(c.jsx)(ue,{})}),Object(c.jsxs)(O.a,{w:s?"50%":"100%",boxShadow:"2xl",m:6,p:"6",rounded:"md",bg:"white",children:[Object(c.jsx)(xe,{title:t}),Object(c.jsx)("hr",{}),Object(c.jsx)(O.a,{mt:2,children:a.loading?Object(c.jsx)(ce,{}):Object(c.jsx)(c.Fragment,{children:r.length>0?Object(c.jsx)(ie,{posts:r}):Object(c.jsx)(pe,{})})}),Object(c.jsx)(je,{postData:a})]}),s&&Object(c.jsx)(O.a,{w:"25%",children:Object(c.jsx)(be,{})})]})},fe=function(){var e=Object(d.c)(),t=Object(d.d)((function(e){return e.post}));return Object(r.useEffect)((function(){e(J())}),[e]),Object(c.jsx)(me,{postData:t,title:"Latest Updates"})},ye=function(e){var t=e.match.params.semesterId,a=e.match.params.semesterTitle,n=Object(d.c)(),s=Object(d.d)((function(e){return e.post}));return Object(r.useEffect)((function(){n(J({semester:t}))}),[n,t]),Object(c.jsx)(me,{postData:s,title:"Updates from - ".concat(a)})},ge=function(e){var t=e.match.params.courseId,a=e.match.params.courseCode,n=e.match.params.courseTitle,s=Object(d.c)(),o=Object(d.d)((function(e){return e.post}));return Object(r.useEffect)((function(){s(J({course:t}))}),[s,t]),Object(c.jsx)(me,{postData:o,title:"Updates from - ".concat(n," - (").concat(a,")")})},ve=a(196),we=function(e){return Object(c.jsx)(ve.a,{maxW:"xl",children:Object(c.jsxs)(O.a,{boxShadow:"2xl",m:6,p:"6",rounded:"md",bg:"white",children:[Object(c.jsx)(se,{as:"h2",size:"lg",letterSpacing:"-.1rem",title:e.title}),Object(c.jsx)("hr",{}),Object(c.jsx)(O.a,{mb:4,mt:4,children:e.children}),"login"===e.type&&Object(c.jsxs)(b.a,{children:[Object(c.jsx)(ne.a,{color:"teal.500",as:i.b,to:"/forget-password",children:"Forgot Password?"}),Object(c.jsx)(le.a,{}),Object(c.jsx)(ne.a,{color:"teal.500",as:i.b,to:"/register",children:"Create an Account"})]}),"register"===e.type&&Object(c.jsx)(ne.a,{color:"teal.500",as:i.b,to:"/login",children:"Already have account? Login here"})]})})},Ee=function(e){var t=e.title,a=Object(g.a)(e,["title"]);return Object(c.jsx)(h.a,Object(l.a)(Object(l.a)({},a),{},{colorScheme:"teal",mt:2,type:"submit",children:t}))},Se=a(39),_e=a(197),Ce=a(198),Re=a(199),Te=a(200),Ae=a(201),ke=function(e){var t=e.value,a=e.label,r=e.onChange,n=e.id,s=e.type,o=e.placeholder,i=e.isInvalid,l=e.errorMsg;return"select"===s?Object(c.jsxs)(Se.a,{isInvalid:i,mb:2,id:n,children:[Object(c.jsx)(_e.a,{children:a}),Object(c.jsx)(Ce.a,{value:t,onChange:function(e){return r(e.target.value)},children:e.children}),l&&Object(c.jsx)(Re.a,{children:l})]}):"textarea"===s?Object(c.jsxs)(Se.a,{isInvalid:i,mb:2,id:n,children:[Object(c.jsx)(_e.a,{children:a}),Object(c.jsx)(Te.a,{value:t,onChange:function(e){return r(e.target.value)},placeholder:o}),l&&Object(c.jsx)(Re.a,{children:l})]}):Object(c.jsxs)(Se.a,{isInvalid:i,mb:2,id:n,children:[Object(c.jsx)(_e.a,{children:a}),Object(c.jsx)(Ae.a,{value:t,onChange:function(e){return r(e.target.value)},type:s,placeholder:o}),l&&Object(c.jsx)(Re.a,{children:l})]})},De=a(209),Pe=a(202),Ie=function(e){var t=e.type,a=e.text,n=Object(g.a)(e,["type","text"]),s=Object(r.useState)(!0),o=Object(j.a)(s,2),i=o[0],d=o[1];return Object(c.jsx)(c.Fragment,{children:i&&Object(c.jsxs)(De.a,Object(l.a)(Object(l.a)({status:t},n),{},{children:[Object(c.jsx)(De.c,{}),a,Object(c.jsx)(Pe.a,{onClick:function(){return d(!1)},position:"absolute",right:"8px",top:"8px"})]}))})},Le=function(e){var t=e.history,a=Object(d.c)(),n=Object(r.useState)(""),s=Object(j.a)(n,2),o=s[0],i=s[1],l=Object(r.useState)(""),u=Object(j.a)(l,2),b=u[0],p=u[1],O=Object(d.d)((function(e){return e.auth}));return Object(c.jsxs)(we,{title:"User Login",type:"login",children:[Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(function(e,t){return function(a){a({type:A,payload:!0}),a({type:R,payload:{}}),E.post("/auth/login/",e).then((function(e){localStorage.setItem("userToken",e.data.key),a({type:C}),t.push("/")})).catch((function(e){a({type:R,payload:e.response.data}),a({type:A,payload:!1})}))}}({email:o,password:b},t))},children:[Object(c.jsx)(ke,{label:"Email address",value:o,onChange:i,placeholder:"Email",type:"email"}),Object(c.jsx)(ke,{label:"Password",value:b,onChange:p,placeholder:"Password",type:"password"}),Object(c.jsx)(Ee,{isLoading:O.loading,loadingText:"Logging in...",title:"Login"})]}),Object.keys(O.loginErrors).length>0&&Object(c.jsx)(Ie,{mt:2,text:"Unable to login with the credentials!",type:"error"})]})},Fe=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(""),o=Object(j.a)(s,2),i=o[0],l=o[1],d=Object(r.useState)(""),u=Object(j.a)(d,2),b=u[0],p=u[1],O=Object(r.useState)(""),h=Object(j.a)(O,2),x=h[0],m=h[1],f=Object(r.useState)(""),y=Object(j.a)(f,2),g=y[0],v=y[1];return Object(c.jsx)(we,{title:"Create an Account",type:"register",children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(c.jsx)(ke,{label:"Email address",value:a,onChange:n,placeholder:"Email",type:"email"}),Object(c.jsx)(ke,{label:"Full Name",value:b,onChange:p,placeholder:"Full Name",type:"text"}),Object(c.jsx)(ke,{label:"Registration No.",value:i,onChange:l,type:"text",placeholder:"2017338017"}),Object(c.jsx)(ke,{label:"Password",value:x,onChange:m,placeholder:"Password",type:"password"}),Object(c.jsx)(ke,{label:"Confirm Password",value:g,onChange:v,placeholder:"Confirm Password",type:"password"}),Object(c.jsx)(Ee,{disabled:!0,title:"Register"}),Object(c.jsx)(Ie,{mt:2,text:"Registration is currently unavailable!",type:"error"})]})})},Me=function(){var e=Object(d.c)(),t=Object(d.d)((function(e){return e.course})),a=Object(d.d)((function(e){return e.semester})),n=Object(r.useState)(""),s=Object(j.a)(n,2),o=s[0],i=s[1],l=Object(r.useState)(""),u=Object(j.a)(l,2),b=u[0],p=u[1],O=Object(r.useState)(1),h=Object(j.a)(O,2),x=h[0],m=h[1];Object(r.useEffect)((function(){e(de())}),[e]);return Object(c.jsxs)(we,{title:"Create Course",children:[Object(c.jsxs)("form",{onSubmit:function(a){a.preventDefault(),e(function(e){return function(t){E.post("/courses/",e).then((function(e){t({type:F,payload:e.data})})).catch((function(e){t({type:M,payload:e.response.data})}))}}({course_code:o,title:b,semester:x})),0===Object.keys(t.errors).length&&(a.target.reset(),i(""),p(""),m(1))},children:[Object(c.jsx)(ke,{id:"courseCode",label:"Course Code",type:"text",placeholder:"EEE101",value:o,isInvalid:!!t.errors.course_code,onChange:i,errorMsg:t.errors.course_code&&t.errors.course_code[0]}),Object(c.jsx)(ke,{id:"courseTitle",label:"Course Title",type:"text",placeholder:"Fundamentals of Electrical Circuit I",value:b,isInvalid:!!t.errors.title,onChange:p,errorMsg:t.errors.title&&t.errors.title[0]}),Object(c.jsx)(ke,{id:"semester",label:"Semester",type:"select",value:x.id,isInvalid:!!t.errors.semester,onChange:m,errorMsg:t.errors.semester&&t.errors.semester[0],children:a.data.map((function(e){return Object(c.jsx)("option",{value:e.id,children:e.full_name},e.id)}))}),Object(c.jsx)(Ee,{title:"Create Course"})]}),t.created&&Object(c.jsx)(Ie,{mt:2,text:"Course created successfully.",type:"success"})]})},Ne=function(){return Object(d.c)()((function(e){e({type:A,payload:!0}),E.post("/auth/logout/",{headers:W()}).then((function(t){localStorage.removeItem("userToken"),e({type:A,payload:!0}),e({type:T})})).catch((function(t){e({type:"USER_LOGOUT_ERROR",payload:t.response.data}),e({type:A,payload:!0})}))})),Object(c.jsx)(v.a,{to:"/login"})},Ue=a(33),Ge=a(109),ze=a(204),qe=a(203),Be=function(e){var t=e.onChange,a=e.allowedFileType,n=e.postType,s=e.error,o=Object(r.useCallback)((function(e){p((function(t){return[].concat(Object(Ue.a)(t),Object(Ue.a)(e))}))}),[]);Object(r.useEffect)((function(){t(b)})),Object(r.useEffect)((function(){p([])}),[n]);var i=Object(r.useState)([]),d=Object(j.a)(i,2),b=d[0],p=d[1],x=Object(Ge.a)({onDrop:o,accept:a}),m=x.getRootProps,f=x.getInputProps,y=x.isDragActive;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(O.a,Object(l.a)(Object(l.a)({boxShadow:"md",my:2,rounded:"md",py:2,bg:"white"},m()),{},{children:[Object(c.jsxs)(qe.a,{my:2,children:[Object(c.jsx)("input",Object(l.a)({},f())),y?Object(c.jsx)("p",{children:"Release files now!"}):Object(c.jsx)("p",{children:"Click or drag files here to upload"})]}),Object(c.jsx)(qe.a,{my:2,children:Object(c.jsx)(h.a,{leftIcon:Object(c.jsx)(ze.a,{}),colorScheme:"pink",children:"Choose Files"})}),s&&Object(c.jsx)(qe.a,{my:2,children:Object(c.jsx)(u.a,{color:"#ff0000",children:s})})]})),b.length>0&&Object(c.jsx)(We,{files:b})]})},We=function(e){var t=e.files;return Object(c.jsxs)(O.a,{children:[Object(c.jsx)(_e.a,{children:"Selected Files"}),Object(c.jsx)($.a,{my:2,spacing:2,children:t.map((function(e){return Object(c.jsxs)($.c,{children:[Object(c.jsx)($.b,{as:ee.a,color:"green.500"}),e.name," - ",H(e.size)]},"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:t&&11).toString(16)})))}))})]})},He=function(){var e=Object(d.c)(),t=Object(d.d)((function(e){return e.course})),a=Object(d.d)((function(e){return e.semester})),n=Object(d.d)((function(e){return e.post})),s=Object(r.useState)(1),o=Object(j.a)(s,2),i=o[0],l=o[1],u=Object(r.useState)(1),b=Object(j.a)(u,2),p=b[0],O=b[1],h=Object(r.useState)([]),x=Object(j.a)(h,2),m=x[0],f=x[1],y=Object(r.useState)(""),g=Object(j.a)(y,2),v=g[0],w=g[1],S=Object(r.useState)("book"),_=Object(j.a)(S,2),C=_[0],R=_[1],T=Object(r.useState)([]),A=Object(j.a)(T,2),k=A[0],D=A[1],P=Object(r.useState)(""),F=Object(j.a)(P,2),M=F[0],N=F[1];Object(r.useEffect)((function(){e(de()),e((function(e){E.get("/courses/").then((function(t){e({type:I,payload:t.data})})).catch((function(t){e({type:L,payload:t.response.data})}))}))}),[e]),Object(r.useEffect)((function(){0!==k.length&&N("")}),[k]);Object(r.useEffect)((function(){U(1)}),[t]);var U=function(e){e=parseInt(e),l(e);var a=t.data.length>0?t.data:[];f(a.filter((function(t){return t.semester===e})))};return Object(c.jsxs)(we,{title:"Upload materials",children:[Object(c.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),0===k.length)return N("Please select some attachments!");N(""),e(function(e){return function(t){var a=e.postType,c=e.body,r=e.course,n=e.semester,s=e.uploadedFiles;if(t({type:B,payload:!0}),t({type:z,payload:!1}),"book"===a){var o=[];s.forEach((function(e){var t=new FormData;t.append("file",e,e.name),t.append("title",e.name),t.append("course",r),t.append("semester",n),o.push(E.post("/books/",t,{headers:W({"content-type":"multipart/form-data"})}))})),Promise.all(o).then((function(e){E.post("/posts/",{course:r,body:c,semester:n,books:e.map((function(e){return e.data.id}))},{headers:W()}).then((function(e){t({type:z,payload:e.data}),t({type:B,payload:!1})}))})).catch((function(e){t({type:q,payload:e.response.data}),t({type:B,payload:!1})}))}else if("classNote"===a){var i=[];s.forEach((function(e){var t=new FormData;t.append("file",e,e.name),t.append("title",e.name),t.append("description",e.name),t.append("course",r),t.append("semester",n),i.push(E.post("/classnotes/",t,{headers:W({"content-type":"multipart/form-data"})}))})),Promise.all(i).then((function(e){E.post("/posts/",{course:r,semester:n,body:c,classnotes:e.map((function(e){return e.data.id}))},{headers:W()}).then((function(e){t({type:z,payload:e.data}),t({type:B,payload:!1})}))})).catch((function(e){t({type:q,payload:e.response.data}),t({type:B,payload:!1})}))}else if("question"===a){var l=[];s.forEach((function(e){var t=new FormData;t.append("picture",e,e.name),t.append("description",e.name),t.append("course",r),t.append("semester",n),l.push(E.post("/pictures/",t,{headers:W({"content-type":"multipart/form-data"})}))})),Promise.all(l).then((function(e){E.post("/questions/",{course:r,semester:n,pictures:e.map((function(e){return e.data.id}))},{headers:W()}).then((function(e){E.post("/posts/",{course:r,body:c,semester:n,questions:[e.data.id]},{headers:W()}).then((function(e){t({type:z,payload:e.data}),t({type:B,payload:!1})})).catch((function(e){t({type:q,payload:e.response.data}),t({type:B,payload:!1})}))})).catch((function(e){t({type:q,payload:e.response.data}),t({type:B,payload:!1})}))})).catch((function(e){t({type:q,payload:e.response.data}),t({type:B,payload:!1})}))}}}({uploadedFiles:k,semester:i,course:p,body:v,postType:C})),0===Object.keys(n.errors).length&&(w(""),R("book"),l(1),O(1))},children:[Object(c.jsxs)(ke,{id:"semester",label:"Type",type:"select",value:C,onChange:R,children:[Object(c.jsx)("option",{value:"book",children:"Book"}),Object(c.jsx)("option",{value:"classNote",children:"Class Note"}),Object(c.jsx)("option",{value:"question",children:"Question"})]}),Object(c.jsx)(Be,{onChange:D,allowedFileType:{question:"image/jpeg, image/png, image/webp",book:"application/pdf",classNote:"application/pdf"}[C],postType:C,error:M}),a.data.length>0?Object(c.jsx)(ke,{id:"semester",label:"Semester",type:"select",value:i,isInvalid:!!n.errors.semester,onChange:U,errorMsg:n.errors.semester&&n.errors.semester[0],children:a.data.map((function(e){return Object(c.jsx)("option",{value:e.id,children:e.full_name},e.id)}))}):Object(c.jsx)(ce,{skeleton:!0,height:"20px"}),t.data.length>0?Object(c.jsx)(ke,{id:"course",label:"Course",type:"select",value:p,isInvalid:!!n.errors.course,onChange:O,errorMsg:n.errors.course&&n.errors.course[0],children:m.map((function(e){return Object(c.jsx)("option",{value:e.id,children:e.title},e.id)}))}):Object(c.jsx)(ce,{skeleton:!0,height:"20px"}),Object(c.jsx)(ke,{id:"body",label:"Comments (optional)",type:"textarea",placeholder:"Write something about the upload...",value:v,isInvalid:!!n.errors.body,onChange:w,errorMsg:n.errors.body&&n.errors.body[0]}),Object(c.jsx)(Ee,{isLoading:n.createLoading,loadingText:"Posting...",title:"Submit"})]}),n.created&&Object(c.jsx)(Ie,{mt:2,text:"Your materials uploaded successfully.",type:"success"})]})},Ve=function(e){var t=Object(d.c)(),a=Object(r.useState)(""),n=Object(j.a)(a,2),s=n[0],o=n[1],i=Object(r.useState)(""),l=Object(j.a)(i,2),u=l[0],b=l[1],p=e.match.params,h=p.uid,x=p.token,m=Object(d.d)((function(e){return e.auth}));return Object(c.jsxs)(we,{title:"Reset Password",children:[Object(c.jsxs)(De.a,{status:"info",mb:2,children:[Object(c.jsx)(De.c,{}),Object(c.jsxs)(O.a,{flex:"1",children:[Object(c.jsx)(De.d,{children:"Create your super secret password!"}),Object(c.jsx)(De.b,{display:"block",children:"Reset Your Password from the bellow form."})]})]}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(function(e,t,a,c){return function(r){r({type:A,payload:!0}),r({type:D,payload:{}}),E.post("/auth/password/reset/confirm/",{new_password1:a,new_password2:c,uid:t,token:e}).then((function(e){r({type:A,payload:!1}),r({type:P,payload:!0}),r({type:D,payload:{}})})).catch((function(e){r({type:A,payload:!1}),r({type:D,payload:e.response.data})}))}}(x,h,s,u))},children:[Object(c.jsx)(ke,{label:"Password",value:s,onChange:o,placeholder:"Password",type:"password",isInvalid:!!m.resetPasswordErrors.new_password1,errorMsg:m.resetPasswordErrors.new_password1}),Object(c.jsx)(ke,{label:"Confirm Password",value:u,onChange:b,placeholder:"Confirm Password",type:"password",isInvalid:!!m.resetPasswordErrors.new_password2,errorMsg:m.resetPasswordErrors.new_password2}),Object(c.jsx)(Ee,{isLoading:m.loading,loadingText:"Resetting...",title:"Reset Password"})]}),m.passwordResetted&&Object(c.jsx)(Ie,{mt:2,text:"Password changed successfully!",type:"success"}),Object.keys(m.resetPasswordErrors).length>0&&Object(c.jsx)(Ie,{mt:2,text:"Failed to change password!",type:"error"})]})},Xe=Object(d.b)((function(e){return{auth:e.auth}}))((function(){var e=Object(d.c)(),t=Object(r.useState)(""),a=Object(j.a)(t,2),n=a[0],s=a[1],o=Object(r.useState)(""),i=Object(j.a)(o,2),l=i[0],u=i[1],b=Object(d.d)((function(e){return e.auth}));return Object(c.jsxs)(we,{title:"Reset Password",children:[Object(c.jsxs)(De.a,{status:"info",mb:2,children:[Object(c.jsx)(De.c,{}),Object(c.jsxs)(O.a,{flex:"1",children:[Object(c.jsx)(De.d,{children:"No Worry, Chill!"}),Object(c.jsx)(De.b,{display:"block",children:"Forget your password? Not a big deal, enter your email and smash Enter key, we'll take care of the rest."})]})]}),Object(c.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),!n)return u("Please enter your email!");u(""),e(function(e){return function(t){t({type:A,payload:!0}),t({type:k,payload:!1}),t({type:R,payload:{}}),E.post("/auth/password/reset/",{email:e}).then((function(e){t({type:A,payload:!1}),t({type:k,payload:!0})})).catch((function(e){t({type:A,payload:!1})}))}}(n))},children:[Object(c.jsx)(ke,{label:"Email address",value:n,onChange:s,placeholder:"Email",type:"email",isInvalid:!!l,errorMsg:l}),Object(c.jsx)(Ee,{isLoading:b.loading,loadingText:"Requesting...",title:"Reset Password"})]}),b.passwordResetEmailSent&&Object(c.jsx)(Ie,{mt:2,text:"If your email is associated with an account, we'll send a password reset e-mail. Please check your email!",type:"success"})]})})),Je=function(){return Object(c.jsxs)(v.d,{children:[Object(c.jsx)(v.b,{path:"/",exact:!0,component:fe}),Object(c.jsx)(v.b,{path:"/semesters",exact:!0,component:be}),Object(c.jsx)(v.b,{path:"/semesters/:semesterId/:semesterTitle",component:ye}),Object(c.jsx)(v.b,{path:"/courses",exact:!0,component:ue}),Object(c.jsx)(Ke,{path:"/course/new",exact:!0,component:Me}),Object(c.jsx)(v.b,{path:"/courses/:courseId/:courseCode/:courseTitle",component:ge}),Object(c.jsx)(Ke,{path:"/post/new",exact:!0,component:He}),Object(c.jsx)(Ye,{path:"/login",component:Le}),Object(c.jsx)(Ye,{path:"/register",component:Fe}),Object(c.jsx)(Ye,{path:"/forget-password",exact:!0,component:Xe}),Object(c.jsx)(Ye,{path:"/forget-password/reset/:uid/:token",component:Ve}),Object(c.jsx)(Ke,{path:"/logout",component:Ne})]})},Ye=function(e){var t=e.component,a=Object(g.a)(e,["component"]),r=Object(d.d)((function(e){return e.auth}));return Object(c.jsx)(v.b,Object(l.a)(Object(l.a)({},a),{},{render:function(e){return Object(c.jsx)(c.Fragment,{children:r.isAuthenticated?Object(c.jsx)(v.a,{to:{pathname:"/",state:{from:e.location}}}):Object(c.jsx)(t,Object(l.a)({},e))})}}))},Ke=function(e){var t=e.component,a=Object(g.a)(e,["component"]),r=Object(d.d)((function(e){return e.auth}));return Object(c.jsx)(v.b,Object(l.a)(Object(l.a)({},a),{},{render:function(e){return Object(c.jsx)(c.Fragment,{children:r.isAuthenticated?Object(c.jsx)(t,Object(l.a)({},e)):Object(c.jsx)(v.a,{to:{pathname:"/login",state:{from:e.location}}})})}}))};var Qe=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(y,{}),Object(c.jsx)(Je,{})]})},Ze=a(42),$e={isAuthenticated:!1,loginErrors:{},resetPasswordErrors:{},loading:!1,passwordResetEmailSent:!1,passwordResetted:!1};var et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return{isAuthenticated:!0,loginErrors:{},loading:!1};case A:return Object(l.a)(Object(l.a)({},e),{},{loading:t.payload});case k:return Object(l.a)(Object(l.a)({},e),{},{passwordResetEmailSent:t.payload});case D:return Object(l.a)(Object(l.a)({},e),{},{resetPasswordErrors:t.payload});case P:return Object(l.a)(Object(l.a)({},e),{},{passwordResetted:t.payload});case R:return Object(l.a)(Object(l.a)({},e),{},{isAuthenticated:!1,loginErrors:t.payload});case T:return{loginErrors:{},loading:!1,isAuthenticated:!1};default:return e}},tt={data:{},errors:{},created:!1};var at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(l.a)(Object(l.a)({},e),{},{created:!0,errors:{}});case I:return Object(l.a)(Object(l.a)({},e),{},{created:!1,errors:{},data:t.payload});case L:return Object(l.a)(Object(l.a)({},e),{},{created:!1,errors:t.payload,data:{}});case M:return Object(l.a)(Object(l.a)({},e),{},{created:!1,errors:t.payload});default:return e}},ct={data:[],errors:{},next:null,previous:null,loading:!0,created:!1,createLoading:!1};var rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(l.a)(Object(l.a)({},e),{},{data:t.payload.results,next:t.payload.next,previous:t.payload.previous});case G:return Object(l.a)(Object(l.a)({},e),{},{data:{},error:t.payload});case N:return Object(l.a)(Object(l.a)({},e),{},{loading:t.payload});case z:return Object(l.a)(Object(l.a)({},e),{},{created:t.payload});case q:return Object(l.a)(Object(l.a)({},e),{},{errors:t.payload,created:!1});case B:return Object(l.a)(Object(l.a)({},e),{},{createLoading:t.payload});default:return e}},nt={data:[],loading:!0};var st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(l.a)(Object(l.a)({},e),{},{data:t.payload});case _:return Object(l.a)(Object(l.a)({},e),{},{loading:t.payload});default:return e}},ot=Object(Ze.c)({auth:et,semester:st,course:at,post:rt}),it=a(108),lt=[Object(Ze.a)(it.a)];window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&lt.push(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__());var jt=Object(Ze.e)(ot,Ze.d.apply(void 0,lt)),dt=a(205);localStorage.getItem("userToken")&&jt.dispatch({type:C}),o.a.render(Object(c.jsx)(dt.a,{children:Object(c.jsx)(i.a,{children:Object(c.jsx)(d.a,{store:jt,children:Object(c.jsx)(Qe,{})})})}),document.getElementById("root"))}},[[176,1,2]]]);
//# sourceMappingURL=main.140b0a8b.chunk.js.map